//
// Custom sass mixins
//
// To use a mixin in this file, add this line to the top of your .scss file:
//   @import "base";
// Then to use a mixin for a particular rule, add this inside the ruleset's
// curly brackets:
//   @include mix-in-name;


// element-invisible as defined by http://snook.ca/archives/html_and_css/hiding-content-for-accessibility
@mixin element-invisible {
  position: absolute !important;
  height: 1px;
  width: 1px;
  overflow: hidden;
  @if $legacy-support-for-ie6 or $legacy-support-for-ie7 {
    clip: rect(1px 1px 1px 1px); // IE6 and IE7 use the wrong syntax.
  }
  clip: rect(1px, 1px, 1px, 1px);
}

// Turns off the element-invisible effect.
@mixin element-invisible-off {
  position: static !important;
  clip: auto;
  height: auto;
  width: auto;
  overflow: auto;
}

@mixin element-focusable {
  @include element-invisible;

  &:active,
  &:focus {
    @include element-invisible-off;
  }
}

// The word "Unpublished" displayed underneath unpublished nodes and comments.
@mixin unpublished-div {
  height: 0;
  overflow: visible;
  color: #d8d8d8;
  font-size: 75px;
  line-height: 1;
  font-family: Impact, "Arial Narrow", Helvetica, sans-serif;
  font-weight: bold;
  text-transform: uppercase;
  text-align: center;
  word-wrap: break-word; // A very nice CSS3 property

  @if $legacy-support-for-ie6 or $legacy-support-for-ie7 {
    .lt-ie8 &>* {
      position: relative; // Otherwise these elements will appear below the "Unpublished" text.
    }
  }
}

// Navigation Mixin to drive the custom width/sizes of the nice-menu navigation
// Use the class generated by OG for the $body-class variable. This must match the body class in the source of the site's pages.
// Use the number of menu items in the top level of the site specific nav for $menu-item-count.
@mixin menu-for($body-class, $menu-item-count) {
  //Primary navigation
  body.#{$body-class} #navigation ul.menu {
    $menu-item-width:($zen-grid-width/$menu-item-count);
    @include zen-grid-container;
    overflow: visible;
    padding: 0;
    margin: 0;
    > li {
      width: $menu-item-width;
      @media all and (min-width: 40em) {
        $menu-item-width:($zen-grid-width/$menu-item-count);  
        width: $menu-item-width;
      }
      @media all and (min-width: 30em) and (max-width: 40em) {
        $menu-item-width:($zen-grid-width/2);  
        width: $menu-item-width;
      }
      @media all and (max-width: 30em) {
        $menu-item-width:($zen-grid-width/1);  
        width: $menu-item-width;
      }
      display: block;
      overflow: hidden;
      float: left;
      &.active > a {
        background: $bentley-blue;
        // This gradient just kills it :)
        @include background-image(linear-gradient( #00acec 1%, #0189df 2%, #0074bd 98%, #004272 99%));
        color: $white;
      }
      a {
        display: block;
        text-align: center;
        @media all and (max-width: 500px) { // mobile nav
          text-align: left;
          border-top: 1px solid $dark-grey;
        }
        text-decoration: none;
        color: $white;
        height: 100%;
        padding-top: 10px;
        padding-bottom: 10px;
        &:active {
          background: $bentley-blue;
          color: $white;
        }
        &:hover {
          background: $white;
          color: $black;
        }
      }
    }
    // Second level Priamry nav
    li.expanded ul.menu {
      display: none;
      width: $menu-item-width;
      max-width: 200px;
      @media all and (max-width: 500px) {
        width: 100%;
        max-width: 100%;
      }
      background: $black;
      position: absolute;
      z-index: 5;
      @media all and (max-width: 500px) {
        position: relative;
        width: 100%;
      }
      @include box-shadow;
      li {
        width: 100%;
        border-top: 1px solid #333;
        a {
          // text-align: left;
          padding: 0.5em 0;
        }
        &.last a {
          border-bottom: 1px solid $black;
        }
      }
    }
  }
}

// Calendar Display Styles
@mixin calendar-icons {
  background: #fff;
  width: 66px;
  text-align: center;
  border: 1px solid #cce3f1;
  display: block;
  overflow: hidden;
  text-transform: capitalize;
  .m {
    width: 100%;
    color: #333;
    padding-top: 1px;
    background: #cce3f1;
  }
  .d {
    width: 100%;
    text-align: center;
    color: $bentley-blue;
    display: block;
    @include adjust-font-size-to($h1-font-size);
    line-height: 1.25em;
  }
}

// Sidebar Menu List Styles (add to ul.menu)
@mixin right-sidebar-menu {
  margin: 0;
  padding: 0;
  position: relative;
  margin-left: -($zen-gutter-width/2);
  margin-right: -($zen-gutter-width/2);
  margin-left: 0px\9; /* IE8 and below */
  margin-right: 0px\9; /* IE8 and below */
  li {
    list-style: none;
    &.last {
      border-bottom: 1px solid $accent-grey;
    }
    a {
      padding: rhythm(0.25) ($zen-gutter-width/2);
      display: block;
      border-top: 1px solid $accent-grey;
      text-decoration: none;
      color: $black;
      &:hover {
        color: $bentley-blue;
        background: $hover-grey;
      }
      &.active-trail {
        color: $bentley-blue;
      }
    }
    // nested menus
    ul.menu {
      margin:0;
      li {
        background: $hover-grey;
        border-bottom: 1px solid #f1f1f1;
        &.last {
          border-bottom: none;
        }
        a {
          padding: rhythm(0.25) 0 rhythm(0.25) ($zen-gutter-width/1.5);
          display: block;
          border-top: 1px solid $accent-grey;
          text-decoration: none;
          color: $black;
          &:hover {
            color: $bentley-blue;
            background: #f1f1f1;
          }
        }
      }
    }
  }
}
